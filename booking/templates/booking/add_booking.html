<!-- FILE: booking/templates/booking/add_booking.html -->
{% extends "base.html" %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "Add Booking" %}{% endblock title %}
{% block description %}{% trans "Add a new booking" %}{% endblock description %}

{% block content %}
<div class="container mt-4">
    <div class="card mb-4">
        <div class="card-header bg-primary text-white text-center">
            <h1 class="card-title mb-4">{% trans "Add Booking" %}</h1>
        </div>
        <div class="card-body">
            <form method="post" id="booking-form">
                {% csrf_token %}
                <div class="mb-3">
                    <label for="id_event" class="form-label">{% trans "Event" %}</label>
                    <select id="id_event" name="event" class="form-select">
                        <option value="">{% trans "Select an event" %}</option>
                        {% for event in events %}
                        <option value="{{ event.id }}">{{ event.location }} - {{ event.start|date:"Y-m-d H:i" }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="mb-3">
                    <label for="id_user" class="form-label">{% trans "User" %}</label>
                    <select id="id_user" name="user" class="form-select">
                        <option value="">{% trans "Select a user" %}</option>
                        {% for user in users %}
                        <option value="{{ user.id }}">{{ user.username }}</option>
                        {% endfor %}
                    </select>
                    <button type="button" class="btn btn-link" id="create-user-btn">{% trans "Create New User" %}</button>
                </div>
                <div id="new-user-fields" style="display: none;">
                    <div class="mb-3">
                        <label for="new_user_first_name" class="form-label">{% trans "First Name" %}</label>
                        <input type="text" id="new_user_first_name" name="new_user_first_name" class="form-control">
                    </div>
                    <div class="mb-3">
                        <label for="new_user_last_name" class="form-label">{% trans "Last Name" %}</label>
                        <input type="text" id="new_user_last_name" name="new_user_last_name" class="form-control">
                    </div>
                    <div class="mb-3">
                        <label for="new_user_phone" class="form-label">{% trans "Phone Number" %}</label>
                        <input type="text" id="new_user_phone" name="new_user_phone" class="form-control">
                    </div>
                    <div class="mb-3">
                        <label for="new_user_email" class="form-label">{% trans "Email Address" %}</label>
                        <input type="email" id="new_user_email" name="new_user_email" class="form-control">
                    </div>
                    <button type="button" class="btn btn-primary" id="save-new-user-btn">{% trans "Save User" %}</button>
                </div>
                <div id="date-time-fields" style="display: none;">
                    <div class="mb-3">
                        <label for="id_start_time" class="form-label">{% trans "Start Time" %}</label>
                        <select id="id_start_time" name="start_time" class="form-select">
                            <option value="">{% trans "Select a time" %}</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="number_of_people" class="form-label">{% trans "Number of People" %}</label>
                        <input type="number" id="number_of_people" name="number_of_people" class="form-control">
                    </div>
                    <div class="mb-3">
                        <label for="comments_user" class="form-label">{% trans "User Comments" %}</label>
                        <textarea id="comments_user" name="comments_user" class="form-control" rows="3"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="comments_staff" class="form-label">{% trans "Staff Comments" %}</label>
                        <textarea id="comments_staff" name="comments_staff" class="form-control" rows="3"></textarea>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">{% trans "Add Booking" %}</button>
            </form>
        </div>
    </div>
</div>
{% endblock content %}

{% block scripts %}
<script src="{% static 'booking/js/add_booking.js' %}"></script>
{% endblock scripts %}